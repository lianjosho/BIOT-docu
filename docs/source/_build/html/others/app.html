<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>5.- Comunicación con la APP &mdash; BIOT 0.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="6.- Guardado en memoria SD" href="sd.html" />
    <link rel="prev" title="4.- Tipos de sensores soportados" href="sensors.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            BIOT
          </a>
              <div class="version">
                0.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="description.html"><span class="sectnum">1.- </span>Descripción del equipo</a></li>
<li class="toctree-l1"><a class="reference internal" href="components.html"><span class="sectnum">2.- </span>Componentes del equipo</a></li>
<li class="toctree-l1"><a class="reference internal" href="firmware.html"><span class="sectnum">3.- </span>Información sobre el firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="sensors.html"><span class="sectnum">4.- </span>Tipos de sensores soportados</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#"><span class="sectnum">5.- </span>Comunicación con la APP</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#actualizacion-del-rtc-interno"><span class="sectnum">5.1.- </span>Actualización del RTC interno</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuracion-del-equipo"><span class="sectnum">5.2.- </span>Configuración del equipo</a></li>
<li class="toctree-l2"><a class="reference internal" href="#palabras-clave"><span class="sectnum">5.3.- </span>Palabras clave</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#erase">erase</a></li>
<li class="toctree-l3"><a class="reference internal" href="#eeprom">eeprom</a></li>
<li class="toctree-l3"><a class="reference internal" href="#chequeo">chequeo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#voltaje-volt">voltaje,&lt;volt&gt;</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modo12">modo12</a></li>
<li class="toctree-l3"><a class="reference internal" href="#offline">offline</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modulo">modulo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reset">reset</a></li>
<li class="toctree-l3"><a class="reference internal" href="#invalid-sn">invalid sn</a></li>
<li class="toctree-l3"><a class="reference internal" href="#invalid-time">invalid time</a></li>
<li class="toctree-l3"><a class="reference internal" href="#log">log</a></li>
<li class="toctree-l3"><a class="reference internal" href="#apn-valor-de-apn">apn,&lt;valor de apn&gt;</a></li>
<li class="toctree-l3"><a class="reference internal" href="#user-valor-de-user">user,&lt;valor de user&gt;</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pwd-valor-de-pwd">pwd,&lt;valor de pwd&gt;</a></li>
<li class="toctree-l3"><a class="reference internal" href="#erase-cred">erase cred</a></li>
<li class="toctree-l3"><a class="reference internal" href="#erase-log">erase log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#medicion-manual"><span class="sectnum">5.4.- </span>Medición manual</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pedido-del-historial"><span class="sectnum">5.5.- </span>Pedido del historial</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sd.html"><span class="sectnum">6.- </span>Guardado en memoria SD</a></li>
<li class="toctree-l1"><a class="reference internal" href="server.html"><span class="sectnum">7.- </span>Comunicación con el servidor</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer.html"><span class="sectnum">8.- </span>Desarrollador</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc_test.html"><span class="sectnum">9.- </span>Pruebas varias</a></li>
<li class="toctree-l1"><a class="reference internal" href="bugs.html"><span class="sectnum">10.- </span>Bugs reportados</a></li>
<li class="toctree-l1"><a class="reference internal" href="changes.html"><span class="sectnum">11.- </span>Cambios o propuestas de mejora</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Versionado</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BIOT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="sectnum">5.- </span>Comunicación con la APP</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/others/app.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="comunicacion-con-la-app">
<h1><a class="toc-backref" href="#id1" role="doc-backlink"><span class="sectnum">5.- </span>Comunicación con la APP</a><a class="headerlink" href="#comunicacion-con-la-app" title="Permalink to this heading"></a></h1>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="auto-toc simple">
<li><p><a class="reference internal" href="#comunicacion-con-la-app" id="id1"><span class="sectnum">5.- </span>Comunicación con la APP</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#actualizacion-del-rtc-interno" id="id2"><span class="sectnum">5.1.- </span>Actualización del RTC interno</a></p></li>
<li><p><a class="reference internal" href="#configuracion-del-equipo" id="id3"><span class="sectnum">5.2.- </span>Configuración del equipo</a></p></li>
<li><p><a class="reference internal" href="#palabras-clave" id="id4"><span class="sectnum">5.3.- </span>Palabras clave</a></p>
<ul>
<li><p><a class="reference internal" href="#erase" id="id5">erase</a></p></li>
<li><p><a class="reference internal" href="#eeprom" id="id6">eeprom</a></p></li>
<li><p><a class="reference internal" href="#chequeo" id="id7">chequeo</a></p></li>
<li><p><a class="reference internal" href="#voltaje-volt" id="id8">voltaje,&lt;volt&gt;</a></p></li>
<li><p><a class="reference internal" href="#modo12" id="id9">modo12</a></p></li>
<li><p><a class="reference internal" href="#offline" id="id10">offline</a></p></li>
<li><p><a class="reference internal" href="#modulo" id="id11">modulo</a></p></li>
<li><p><a class="reference internal" href="#reset" id="id12">reset</a></p></li>
<li><p><a class="reference internal" href="#invalid-sn" id="id13">invalid sn</a></p></li>
<li><p><a class="reference internal" href="#invalid-time" id="id14">invalid time</a></p></li>
<li><p><a class="reference internal" href="#log" id="id15">log</a></p></li>
<li><p><a class="reference internal" href="#apn-valor-de-apn" id="id16">apn,&lt;valor de apn&gt;</a></p></li>
<li><p><a class="reference internal" href="#user-valor-de-user" id="id17">user,&lt;valor de user&gt;</a></p></li>
<li><p><a class="reference internal" href="#pwd-valor-de-pwd" id="id18">pwd,&lt;valor de pwd&gt;</a></p></li>
<li><p><a class="reference internal" href="#erase-cred" id="id19">erase cred</a></p></li>
<li><p><a class="reference internal" href="#erase-log" id="id20">erase log</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#medicion-manual" id="id21"><span class="sectnum">5.4.- </span>Medición manual</a></p></li>
<li><p><a class="reference internal" href="#pedido-del-historial" id="id22"><span class="sectnum">5.5.- </span>Pedido del historial</a></p></li>
</ul>
</li>
</ul>
</nav>
<p class="linemarker linemarker-11">Cuando el celular está conectado al equipo, éste puede
atender las siguientes peticiones:</p>
<ul class="simple">
<li><p class="linemarker linemarker-14">Actualización del RTC interno</p></li>
<li><p class="linemarker linemarker-15">Configuración del equipo</p></li>
<li><p class="linemarker linemarker-16">Palabras clave</p></li>
<li><p class="linemarker linemarker-17">Medición manual</p></li>
<li><p class="linemarker linemarker-18">Pedido del historial</p></li>
</ul>
<section id="actualizacion-del-rtc-interno">
<h2><a class="toc-backref" href="#id2" role="doc-backlink"><span class="sectnum">5.1.- </span>Actualización del RTC interno</a><a class="headerlink" href="#actualizacion-del-rtc-interno" title="Permalink to this heading"></a></h2>
<p class="linemarker linemarker-23">El HTTP request es el siguiente:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/updateDate</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">user-agent</span><span class="o">:</span> <span class="l">Dart/2.16 (dart:io)</span>
<span class="na">content-type</span><span class="o">:</span> <span class="l">text/plain; charset=utf-8</span>
<span class="na">accept-encoding</span><span class="o">:</span> <span class="l">gzip</span>
<span class="na">content-length</span><span class="o">:</span> <span class="l">36</span>
<span class="na">host</span><span class="o">:</span> <span class="l">192.168.4.1</span>


&quot;{date: 2022-12-13T21:07:33.803604}&quot;
</pre></div>
</div>
<p class="linemarker linemarker-37">Con esta información, se actualiza el RTC externo y se pone
en hora también el RTC interno. Después de esto, le manda a
la app el siguiente HTTP response:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

V5.0.1
</pre></div>
</div>
<p class="linemarker linemarker-48">Donde va la información de la versión del firmware.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p class="linemarker linemarker-52">Cada vez que el ESP32 se queda sin suministro eléctrico,
el RTC vuelve al epoch time (1 de enero de 1970 a las 0hs),
es por eso que se sincroniza con el RTC externo (DS3231)
cada vez que se despierta.</p>
</div>
</section>
<section id="configuracion-del-equipo">
<h2><a class="toc-backref" href="#id3" role="doc-backlink"><span class="sectnum">5.2.- </span>Configuración del equipo</a><a class="headerlink" href="#configuracion-del-equipo" title="Permalink to this heading"></a></h2>
<p class="linemarker linemarker-60">El HTTP request es el siguiente:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/setConfig</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">user-agent</span><span class="o">:</span> <span class="l">Dart/2.16 (dart:io)</span>
<span class="na">content-type</span><span class="o">:</span> <span class="l">application/json; charset=utf-8</span>
<span class="na">accept-encoding</span><span class="o">:</span> <span class="l">gzip</span>
<span class="na">content-length</span><span class="o">:</span> <span class="l">158</span>
<span class="na">host</span><span class="o">:</span> <span class="l">192.168.4.1</span>

<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;soil_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Arcillo arenoso&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;location_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;holas&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;sensors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;Salida1(o1)&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;tag_depth&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-31.4402331</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-64.2040826</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="linemarker linemarker-87">Si todo sale bien, entonces el http response es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

Configuración
=============
id: L-378C
RTC ref.:
  2023-11-28-12-00-00
RTC int.:
  2023-11-28-14-06-54
RTC ext.:
  2023-11-28-14-06-54
Salidas:
 · 1: ok
 · 2: -
 · 3: -
 · 4: -
 · 5: -
Firm. Vers.: V7.6.0
Offline: Sí
Guardado: ok
Subido: -
</pre></div>
</div>
<p class="linemarker linemarker-114">Donde:</p>
<ul class="simple">
<li><p class="linemarker linemarker-116"><code class="docutils literal notranslate"><span class="pre">id</span></code>: identificador del equipo.</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">RTC</span> <span class="pre">ref.</span></code>: es la hora de referencia guardada en la eeprom del equipo:</dt><dd><ul>
<li><p class="linemarker linemarker-118"><em>Con modo 12</em>: es la fecha con la hora en punto anterior.</p></li>
<li><p class="linemarker linemarker-119"><em>Con modo normal</em>: es la fecha con la hora en 00 o 12 anterior.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p class="linemarker linemarker-120"><code class="docutils literal notranslate"><span class="pre">RTC</span> <span class="pre">int.</span></code>: es la hora con la que se carga el equipo; si sale todo
ok, coincide con la RTC ext.</p></li>
<li><p class="linemarker linemarker-122"><code class="docutils literal notranslate"><span class="pre">RTC</span> <span class="pre">ext.</span></code>: es la hora que se recupera del RTC externo (DS3231).
Si esta hora no coincide con la fecha en que se esté haciendo la
configuración, entonces el RTC externo no se inicializó correctamente.</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Salidas:</span></code>: es el resultado del chequeo de cada salida. Está conformado con el número de salida (que va desde 1 a 5) y lo siguiente:</dt><dd><ul>
<li><p class="linemarker linemarker-126"><strong>ok</strong>: el sensor respondió como debe ser.</p></li>
<li><p class="linemarker linemarker-127"><strong>-</strong>: el sensor no respondió o no está configurado.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p class="linemarker linemarker-128"><code class="docutils literal notranslate"><span class="pre">Firm.</span> <span class="pre">Vers.</span></code>: versión del firmware.</p></li>
<li><p class="linemarker linemarker-129"><code class="docutils literal notranslate"><span class="pre">offline</span></code>: indica si el modo offline está des/activado.</p></li>
<li><p class="linemarker linemarker-130"><code class="docutils literal notranslate"><span class="pre">Guardado</span></code>: indica si la configuración se guardó en el equipo.</p></li>
<li><p class="linemarker linemarker-131"><code class="docutils literal notranslate"><span class="pre">Subido</span></code>: indica si la configuración se subió al servidor; si
el equipo está en modo offline: entonces .</p></li>
</ul>
</section>
<section id="palabras-clave">
<h2><a class="toc-backref" href="#id4" role="doc-backlink"><span class="sectnum">5.3.- </span>Palabras clave</a><a class="headerlink" href="#palabras-clave" title="Permalink to this heading"></a></h2>
<p class="linemarker linemarker-137">Si el campo <code class="docutils literal notranslate"><span class="pre">location_name</span></code> tiene alguna de las siguientes
palabras reservadas, entonces el equipo no hace la
configuración y atiende ese caso especial.</p>
<ul class="simple">
<li><p class="linemarker linemarker-141">erase</p></li>
<li><p class="linemarker linemarker-142">eeprom</p></li>
<li><p class="linemarker linemarker-143">chequeo</p></li>
<li><p class="linemarker linemarker-144">voltaje,&lt;bat_level&gt;</p></li>
<li><p class="linemarker linemarker-145">modo12</p></li>
<li><p class="linemarker linemarker-146">offline</p></li>
<li><p class="linemarker linemarker-147">modulo</p></li>
<li><p class="linemarker linemarker-148">reset</p></li>
<li><p class="linemarker linemarker-149">invalid sn</p></li>
<li><p class="linemarker linemarker-150">invalid time</p></li>
<li><p class="linemarker linemarker-151">log</p></li>
<li><p class="linemarker linemarker-152">apn,&lt;valor de apn&gt;</p></li>
<li><p class="linemarker linemarker-153">user,&lt;valor de user&gt;</p></li>
<li><p class="linemarker linemarker-154">pwd,&lt;valor de pwd&gt;</p></li>
<li><p class="linemarker linemarker-155">erase cred</p></li>
<li><p class="linemarker linemarker-156">erase log</p></li>
</ul>
<section id="erase">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">erase</a><a class="headerlink" href="#erase" title="Permalink to this heading"></a></h3>
<p class="linemarker linemarker-161">Borra la configuración del equipo, excepto:</p>
<ul class="simple">
<li><p class="linemarker linemarker-163"><code class="docutils literal notranslate"><span class="pre">mac</span></code>;</p></li>
<li><p class="linemarker linemarker-164"><code class="docutils literal notranslate"><span class="pre">firm_vers</span></code>;</p></li>
<li><p class="linemarker linemarker-165"><code class="docutils literal notranslate"><span class="pre">volt_coeff</span></code> y</p></li>
<li><p class="linemarker linemarker-166"><code class="docutils literal notranslate"><span class="pre">unix_time</span></code>.</p></li>
</ul>
<p class="linemarker linemarker-168">El http_response es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

La configuración ha sido borrada
</pre></div>
</div>
</section>
<section id="eeprom">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">eeprom</a><a class="headerlink" href="#eeprom" title="Permalink to this heading"></a></h3>
<p class="linemarker linemarker-180">Devuelve la configuración del equipo. Es la misma respuesta que en el
caso de una configuración bien hecha.</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

Configuración
=============
id: L-378C
RTC ref.:
  2023-11-28-12-00-00
RTC int.:
  2023-11-28-14-06-54
RTC ext.:
  2023-11-28-14-06-54
Salidas:
 · 1: ok
 · 2: -
 · 3: -
 · 4: -
 · 5: -
Firm. Vers.: V7.6.0
Offline: Sí
Guardado: ok
Subido: -
</pre></div>
</div>
</section>
<section id="chequeo">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">chequeo</a><a class="headerlink" href="#chequeo" title="Permalink to this heading"></a></h3>
<p class="linemarker linemarker-211">Hace un chequeo de los módulos RTC externo y SD y las
salidas. Luego le envía a la app un mensaje con el
resultado del chequeo.</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

Chequeo:
========
- Tarjeta SD: Ok
- RTC externo: Ok
- Módulo SIM: No
  se chequea. Modo offline activado
- Salidas:
   · 1: Ok
- Paquetes en SD: 0
</pre></div>
</div>
<p class="linemarker linemarker-230">Donde:</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Tarjeta</span> <span class="pre">SD</span></code>: instala el módulo SD y crea los archivos necesarios para trabajar si no estaban creados.</dt><dd><ul>
<li><p class="linemarker linemarker-233"><strong>ok</strong>: la tarjeta responde bien.</p></li>
<li><p class="linemarker linemarker-234"><strong>falla</strong>: la tarjeta no responde.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">RTC</span> <span class="pre">externo</span></code>: instala el módulo DS3231. Si no responde a la primera llamada, se desalimenta, se espera 100 ms, se vuelve a alimentar y se chequea de nuevo:</dt><dd><ul>
<li><p class="linemarker linemarker-236"><strong>ok</strong>: el DS3231 responde bien.</p></li>
<li><p class="linemarker linemarker-237"><strong>falla</strong>: el módulo no responde.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Módulo</span> <span class="pre">SIM</span></code>: se alimenta el módulo SIM y se intenta mandar un paquete al server.</dt><dd><ul>
<li><p class="linemarker linemarker-239"><strong>No se chequea. Modo offline activado</strong>: no se hace el chequeo porque el equipo está en modo offline.</p></li>
<li><p class="linemarker linemarker-240"><strong>ok</strong>: el módulo SIM responde bien.</p></li>
<li><p class="linemarker linemarker-241"><strong>falla</strong>: el módulo no responde.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Salidas</span></code>: chequeo de las salidas (las salidas no configuradas NO se muestran):</dt><dd><ul>
<li><p class="linemarker linemarker-243"><strong>ok</strong>: el sensor responde bien.</p></li>
<li><p class="linemarker linemarker-244"><strong>falla</strong>: el sensor no responde.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p class="linemarker linemarker-245"><code class="docutils literal notranslate"><span class="pre">Paquetes</span> <span class="pre">en</span> <span class="pre">SD</span></code>: cantidad de paquetes guardados en la SD que no se puedieron enviar.</p></li>
</ul>
</section>
<section id="voltaje-volt">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">voltaje,&lt;volt&gt;</a><a class="headerlink" href="#voltaje-volt" title="Permalink to this heading"></a></h3>
<p class="linemarker linemarker-250">Configura el coeficiente de voltaje, donde &lt;volt&gt; es el
valor de voltaje de la batería en ese momento. La HTTP response es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

{
    &quot;message&quot;: &quot;Coeficiente de voltaje seteado en 1.00&quot;
}
</pre></div>
</div>
</section>
<section id="modo12">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">modo12</a><a class="headerlink" href="#modo12" title="Permalink to this heading"></a></h3>
<p class="linemarker linemarker-265">Activa o desactiva el modo 12. Si el modo 12 estaba desactivado, el
<code class="docutils literal notranslate"><span class="pre">http_response</span></code> es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

{
  &quot;message&quot;: &quot;modo normal&quot;,
  &quot;measures&quot;: &quot;12:00&quot;,
  &quot;send&quot;: &quot;12:00&quot;,
  &quot;unix_eeprom&quot;: &quot;2023-11-21-12-00-00&quot;,
  &quot;timeStamp RTC externo&quot;: &quot;2023-11-21-13-10-23&quot;,
  &quot;timestamp equipo&quot;: &quot;2023-11-21-13-10-23&quot;
}
</pre></div>
</div>
<p class="linemarker linemarker-282">Si se vuelve a mandar la palabra clave, entonces el
<code class="docutils literal notranslate"><span class="pre">http_response</span></code> es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

{
  &quot;message&quot;: &quot;modo 12&quot;,
  &quot;measures&quot;: &quot;c/1 hs&quot;,
  &quot;send&quot;: &quot;00:00 y 12:00&quot;,
  &quot;unix_eeprom&quot;: &quot;2023-11-21-13-00-00&quot;,
  &quot;timeStamp RTC externo&quot;: &quot;2023-11-21-13-15-51&quot;,
  &quot;timestamp equipo&quot;: &quot;2023-11-21-13-15-51&quot;
}
</pre></div>
</div>
</section>
<section id="offline">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">offline</a><a class="headerlink" href="#offline" title="Permalink to this heading"></a></h3>
<p class="linemarker linemarker-302">Des/activa modo offline. Si el equipo estaba con el modo offline
desactivado, lo activa y devuelve:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

{
    &quot;message&quot;: &quot;Modo offline ACTIVADO&quot;
}
</pre></div>
</div>
<p class="linemarker linemarker-314">Si se vuelve a enviar la palabra clave, entonces responde:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

{
    &quot;message&quot;: &quot;Modo offline desactivado&quot;
}
</pre></div>
</div>
</section>
<section id="modulo">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">modulo</a><a class="headerlink" href="#modulo" title="Permalink to this heading"></a></h3>
<p class="linemarker linemarker-328">Borra el contenido del archivo <code class="docutils literal notranslate"><span class="pre">register.txt</span></code>, que es en donde se
guardan las mediciones fallidas. El http_response es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

{
    &quot;message&quot;: &quot;Memoria SD formateada. Mediciones guardadas eliminadas&quot;
}
</pre></div>
</div>
</section>
<section id="reset">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">reset</a><a class="headerlink" href="#reset" title="Permalink to this heading"></a></h3>
<p class="linemarker linemarker-343">Reinicia el equipo. El esp32 se apaga y se vuelve a encender.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p class="linemarker linemarker-347">Para seguir configurando el equipo, se debe volver a generar la red wifi.</p>
</div>
</section>
<section id="invalid-sn">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">invalid sn</a><a class="headerlink" href="#invalid-sn" title="Permalink to this heading"></a></h3>
<p class="linemarker linemarker-352">Se quita los 0 en el campo “sn” del json de medición que se va a
enviar al servidor. Esto se hace para testear la respuesta del
mismo a un json formado con un sn inválido.</p>
<p class="linemarker linemarker-356">El http_response es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

{
    &quot;message&quot;: &quot;json_measure con SN inválido&quot;
}
</pre></div>
</div>
<p class="linemarker linemarker-367">Y si se vuelve a mandar la palabra clave, devuelve:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

{
    &quot;message&quot;: &quot;json_measure normal&quot;
}
</pre></div>
</div>
</section>
<section id="invalid-time">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">invalid time</a><a class="headerlink" href="#invalid-time" title="Permalink to this heading"></a></h3>
<p class="linemarker linemarker-381">Se manda un timestamp con el año 2025 en el json de medición que
se va a enviar al servidor. Esto se hace para testear la respuesta
del mismo a un json formado con un timestamp inválido.</p>
<p class="linemarker linemarker-385">El http_response es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

{
    &quot;message&quot;: &quot;json_measure con timestamp inválido&quot;
}
</pre></div>
</div>
<p class="linemarker linemarker-396">Y si se vuelve a mandar la palabra clave, devuelve:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

{
    &quot;message&quot;: &quot;json_measure normal&quot;
}
</pre></div>
</div>
</section>
<section id="log">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">log</a><a class="headerlink" href="#log" title="Permalink to this heading"></a></h3>
<p class="linemarker linemarker-410">Devuelve a la app el archivo <code class="docutils literal notranslate"><span class="pre">activity.txt</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p class="linemarker linemarker-414">Con esta palabra se debe hacer la petición con Packet Sender o
programa similar, pues el archivo es muy extensos para que la
app los muestre.</p>
</div>
</section>
<section id="apn-valor-de-apn">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">apn,&lt;valor de apn&gt;</a><a class="headerlink" href="#apn-valor-de-apn" title="Permalink to this heading"></a></h3>
<p class="linemarker linemarker-421">Configura la APN que va a usar el equipo para conectarse a
internet. El <cite>http_response</cite> es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

{
    &quot;message&quot;: &quot;APN configurado&quot;,
    &quot;apn&quot;: &quot;&lt;valor de apn&gt;&quot;,
    &quot;user&quot;: &quot;&lt;valor de user&gt;&quot;,
    &quot;pwd&quot;: &quot;&lt;valor de pwd&gt;&quot;
}
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p class="linemarker linemarker-438">El valor de apn se debe ingresar sin los símbolos &lt;&gt;;
así, si APN es igual a <cite>datos.personal.com</cite>, entonces
la palabra clave a usar es:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">apn,datos.personal.com</span>
</pre></div>
</div>
<p class="linemarker linemarker-446">Lo mismo sucede con USER y PWD.</p>
</div>
</section>
<section id="user-valor-de-user">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">user,&lt;valor de user&gt;</a><a class="headerlink" href="#user-valor-de-user" title="Permalink to this heading"></a></h3>
<p class="linemarker linemarker-451">Configura el USER que va a usar el equipo para conectarse a
internet. El <code class="docutils literal notranslate"><span class="pre">http_response</span></code> es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

{
    &quot;message&quot;: &quot;APN configurado&quot;,
    &quot;apn&quot;: &quot;&lt;valor de apn&gt;&quot;,
    &quot;user&quot;: &quot;&lt;valor de user&gt;&quot;,
    &quot;pwd&quot;: &quot;&lt;valor de pwd&gt;&quot;
}
</pre></div>
</div>
</section>
<section id="pwd-valor-de-pwd">
<h3><a class="toc-backref" href="#id18" role="doc-backlink">pwd,&lt;valor de pwd&gt;</a><a class="headerlink" href="#pwd-valor-de-pwd" title="Permalink to this heading"></a></h3>
<p class="linemarker linemarker-469">Configura el PWD que va a usar el equipo para conectarse a
internet. El <code class="docutils literal notranslate"><span class="pre">http_response</span></code> es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

{
    &quot;message&quot;: &quot;PWD configurado&quot;,
    &quot;apn&quot;: &quot;&lt;valor de apn&gt;&quot;,
    &quot;user&quot;: &quot;&lt;valor de user&gt;&quot;,
    &quot;pwd&quot;: &quot;&lt;valor de pwd&gt;&quot;
}
</pre></div>
</div>
</section>
<section id="erase-cred">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">erase cred</a><a class="headerlink" href="#erase-cred" title="Permalink to this heading"></a></h3>
<p class="linemarker linemarker-487">Borra la APN, USER y PWD que están guardados. El
<code class="docutils literal notranslate"><span class="pre">http_response</span></code> es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

{
    &quot;message&quot;: &quot;Credenciales borradas&quot;,
    &quot;apn&quot;: &quot;&lt;valor de apn&gt;&quot;,
    &quot;user&quot;: &quot;&lt;valor de user&gt;&quot;,
    &quot;pwd&quot;: &quot;&lt;valor de pwd&gt;&quot;
}
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p class="linemarker linemarker-504">Cuando no hay credenciales configuradas, el equipo
consulta al módulo SIM800 para saber a qué prestadora
de servicio de internet permenece el chip insertado y
coloca las credenciales guardadas por defecto.</p>
</div>
</section>
<section id="erase-log">
<h3><a class="toc-backref" href="#id20" role="doc-backlink">erase log</a><a class="headerlink" href="#erase-log" title="Permalink to this heading"></a></h3>
<p class="linemarker linemarker-512">Borra el archivo <code class="docutils literal notranslate"><span class="pre">/activity.txt</span></code> y lo vuelve a crear. El
<code class="docutils literal notranslate"><span class="pre">http_response</span></code> es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

{
    &quot;message&quot;: &quot;Archivo &quot;/activity.txt&quot; borrado&quot;
}
</pre></div>
</div>
</section>
</section>
<section id="medicion-manual">
<h2><a class="toc-backref" href="#id21" role="doc-backlink"><span class="sectnum">5.4.- </span>Medición manual</a><a class="headerlink" href="#medicion-manual" title="Permalink to this heading"></a></h2>
<p class="linemarker linemarker-527">La HTTP request es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/requestMeasuring</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">user-agent</span><span class="o">:</span> <span class="l">Dart/2.16 (dart:io)</span>
<span class="na">content-type</span><span class="o">:</span> <span class="l">application/json; charset=utf-8</span>
<span class="na">accept-encoding</span><span class="o">:</span> <span class="l">gzip</span>
<span class="na">content-length</span><span class="o">:</span> <span class="l">2</span>
<span class="na">host</span><span class="o">:</span> <span class="l">192.168.4.1</span>


<span class="p">{}</span>
</pre></div>
</div>
<p class="linemarker linemarker-541">la <code class="docutils literal notranslate"><span class="pre">http_response</span></code> es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

[
    {json_measure_0},
    {json_measure_1},
    {json_measure_2},
    {json_measure_3},
    {json_measure_4}
]
</pre></div>
</div>
<p class="linemarker linemarker-556">Donde cada json_measure es:</p>
<blockquote>
<div><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;L-1004&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;product&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;THSST&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-12-31-21-00-00&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-31.39164543</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-64.22100067</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;sn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;00000000001&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;humidity&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.59</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;temperature&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">24.98</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;location_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;BRISTE&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;tag_depth&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;loss_tangent&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.000</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;electrical_conductivity&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;electrical_conductivity_tc&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;real_dielectric_permittivity&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;real_dielectric_permittivity_tc&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;imag_dielectric_permittivity&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;imag_dielectric_permittivity_tc&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;ph&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;level_bat&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">6.643</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;verFirm&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;V5.1.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;verHard&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;V1.0.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;number_sent&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="pedido-del-historial">
<h2><a class="toc-backref" href="#id22" role="doc-backlink"><span class="sectnum">5.5.- </span>Pedido del historial</a><a class="headerlink" href="#pedido-del-historial" title="Permalink to this heading"></a></h2>
<p class="linemarker linemarker-662">El HTTP request es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/getHistory</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">user-agent</span><span class="o">:</span> <span class="l">Dart/2.16 (dart:io)</span>
<span class="na">content-type</span><span class="o">:</span> <span class="l">application/json; charset=utf-8</span>
<span class="na">accept-encoding</span><span class="o">:</span> <span class="l">gzip</span>
<span class="na">content-length</span><span class="o">:</span> <span class="l">2</span>
<span class="na">host</span><span class="o">:</span> <span class="l">192.168.4.1</span>


<span class="p">{}</span>
</pre></div>
</div>
<p class="linemarker linemarker-676">Y la HTTP response es un array de json:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>HTTP/1.1<span class="w"> </span><span class="m">200</span><span class="w"> </span>OK
Content-type:<span class="w"> </span>application/json

<span class="o">[</span>
<span class="w">  </span>json_measure_0,
<span class="w">  </span>json_measure_1,
<span class="w">  </span>...,
<span class="w">  </span>json_measure_n
<span class="o">]</span>
</pre></div>
</div>
<p class="linemarker linemarker-690">El ESP32 manda un json cada vez porque tiene un límite de
alrededor de 1400 caracteres por envío al cliente.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p class="linemarker linemarker-695">Después de descargar los datos, el archivo <code class="docutils literal notranslate"><span class="pre">register.txt</span></code>
no se elimina, sólo lo hará cuando el equipo pueda mandar
con éxito dichas mediciones vía sim800 o se hayan
intentado mandar 3 veces sin éxito.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="sensors.html" class="btn btn-neutral float-left" title="4.- Tipos de sensores soportados" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="sd.html" class="btn btn-neutral float-right" title="6.- Guardado en memoria SD" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, BristeFirmware.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>