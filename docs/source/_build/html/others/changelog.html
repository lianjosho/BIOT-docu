<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Versionado &mdash; BIOT 0.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="10.- Bugs reportados" href="bugs.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            BIOT
          </a>
              <div class="version">
                0.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="description.html"><span class="sectnum">1.- </span>Descripción del equipo</a></li>
<li class="toctree-l1"><a class="reference internal" href="components.html"><span class="sectnum">2.- </span>Componentes del equipo</a></li>
<li class="toctree-l1"><a class="reference internal" href="firmware.html"><span class="sectnum">3.- </span>Información sobre el firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="sensors.html"><span class="sectnum">4.- </span>Tipos de sensores soportados</a></li>
<li class="toctree-l1"><a class="reference internal" href="app.html"><span class="sectnum">5.- </span>Comunicación con la APP</a></li>
<li class="toctree-l1"><a class="reference internal" href="sd.html"><span class="sectnum">6.- </span>Guardado en memoria SD</a></li>
<li class="toctree-l1"><a class="reference internal" href="server.html"><span class="sectnum">7.- </span>Comunicación con el servidor</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer.html"><span class="sectnum">8.- </span>Desarrollador</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html"><span class="sectnum">9.- </span>Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="bugs.html"><span class="sectnum">10.- </span>Bugs reportados</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Versionado</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#nomenclatura">Nomenclatura</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tipos-de-cambios">Tipos de cambios</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-6">Versión 6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#v6-1-0-13-09-2023">V6.1.0 - 13/09/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#changed">Changed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v6-0-2-12-09-2023">V6.0.2 - 12/09/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fixed">Fixed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v6-0-1-10-09-2023">V6.0.1 - 10/09/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Fixed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v6-0-0-08-09-2023">V6.0.0 - 08/09/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">Changed</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#version-5">Versión 5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#v5-3-0-08-09-2023">V5.3.0 - 08/09/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">Changed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v5-2-2-07-09-2023">V5.2.2 - 07/09/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id4">Fixed</a></li>
<li class="toctree-l4"><a class="reference internal" href="#added">Added</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v5-2-1-30-08-2023">V5.2.1 - 30/08/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">Changed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v5-2-1-29-08-2023">V5.2.1 - 29/08/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id6">Changed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v5-2-0-28-08-2023">V5.2.0 - 28/08/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id7">Added</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v5-1-0-24-08-2023">V5.1.0 - 24/08/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id8">Added</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v5-0-1-30-06-2023">V5.0.1 - 30/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id9">Fixed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v5-0-0-29-06-2023">V5.0.0 - 29/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id11">Changed</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id12">Added</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#version-4">Versión 4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#v4-2-2-27-06-2023">V4.2.2 - 27/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id13">Fixed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v4-2-1-27-06-2023">V4.2.1 - 27/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id14">Fixed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v4-2-0-27-06-2023">V4.2.0 - 27/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id15">Added</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v4-1-6-23-06-2023">V4.1.6 - 23/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id16">Fixed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v4-1-5-23-06-2023">V4.1.5 - 23/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id17">Added</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v4-1-4-23-06-2023">V4.1.4 - 23/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id18">Changed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v4-1-3-23-06-2023">V4.1.3 - 23/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id19">Fixed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v4-1-2-22-06-2023">V4.1.2 - 22/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id20">Fixed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v4-1-1-22-06-2023">V4.1.1 - 22/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id21">Fixed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v4-1-0-21-06-2023">V4.1.0 - 21/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id22">Added</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v4-0-2-21-06-2023">V4.0.2 - 21/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id23">Fixed</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id24">Added</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v4-0-1-21-06-2023">V4.0.1 - 21/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id25">Fixed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v4-0-0-21-06-2023">V4.0.0 - 21/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id26">Added</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#version-3">Versión 3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#v3-1-4-16-06-2023">V3.1.4 - 16/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id27">Fixed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v3-1-3-16-06-2023">V3.1.3 - 16/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id28">Fixed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v3-1-2-16-06-2023">V3.1.2 - 16/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id29">Fixed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v3-1-1-14-06-2023">V3.1.1 - 14/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id30">Added</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v3-1-0-13-06-2023">V3.1.0 - 13/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id31">Added</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v3-0-0-13-06-2023">V3.0.0 - 13/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id32">Added</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#version-2">Versión 2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#v2-0-2-13-06-2023">V2.0.2 - 13/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#removed">Removed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v2-0-1-12-06-2023">V2.0.1 - 12/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id33">Changed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v2-0-0-12-06-2023">V2.0.0 - 12/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id34">Added</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#version-1">Versión 1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#v1-0-0-12-06-2023">V1.0.0 - 12/06/2023</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id35">Added</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BIOT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Versionado</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/others/changelog.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="versionado">
<h1>Versionado<a class="headerlink" href="#versionado" title="Permalink to this heading"></a></h1>
<ul class="simple">
<li><p class="linemarker linemarker-4">Todos los cambios notables en este proyecto van a ser documentados aquí.</p></li>
<li><p class="linemarker linemarker-5">Las entradas más recientes se colocan arriba.</p></li>
<li><p class="linemarker linemarker-6">Este proyecto adhiere a <a class="reference external" href="https://semver.org/spec/v2.0.0.html">Semantic Versioning</a>.</p></li>
</ul>
<section id="nomenclatura">
<h2>Nomenclatura<a class="headerlink" href="#nomenclatura" title="Permalink to this heading"></a></h2>
<div style="background-color: brown; color: white; padding: 10px; border-radius: 5px; width: 300px; text-align: center;">
   V<span>&lt;major&gt;</span><span>&lt;minor&gt;</span><span>&lt;patch&gt;</span>
</div><ul class="simple">
<li><p class="linemarker linemarker-18"><code class="docutils literal notranslate"><span class="pre">Major</span></code>: se incrementa cuando se hacen cambios incompatibles con versiones anteriores.</p></li>
<li><p class="linemarker linemarker-19"><code class="docutils literal notranslate"><span class="pre">Minor</span></code>: se incrementa cuando se agregan nuevas funcionalidades de forma compatible con versiones anteriores.</p></li>
<li><p class="linemarker linemarker-20"><code class="docutils literal notranslate"><span class="pre">Patch</span></code>: se incrementa cuando se realizan correcciones de errores o cambios menores de forma compatible con versiones anteriores.</p></li>
</ul>
</section>
<section id="tipos-de-cambios">
<h2>Tipos de cambios<a class="headerlink" href="#tipos-de-cambios" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p class="linemarker linemarker-25"><code class="docutils literal notranslate"><span class="pre">Added</span></code> para funcionalidades nuevas.</p></li>
<li><p class="linemarker linemarker-26"><code class="docutils literal notranslate"><span class="pre">Changed</span></code> para los cambios en las funcionalidades existentes.</p></li>
<li><p class="linemarker linemarker-27"><code class="docutils literal notranslate"><span class="pre">Removed</span></code> para las características en desuso que se eliminaron en esta versión.</p></li>
<li><p class="linemarker linemarker-28"><code class="docutils literal notranslate"><span class="pre">Fixed</span></code> para corrección de errores.</p></li>
</ul>
</section>
<section id="version-6">
<h2>Versión 6<a class="headerlink" href="#version-6" title="Permalink to this heading"></a></h2>
<section id="v6-1-0-13-09-2023">
<h3>V6.1.0 - 13/09/2023<a class="headerlink" href="#v6-1-0-13-09-2023" title="Permalink to this heading"></a></h3>
<section id="changed">
<h4>Changed<a class="headerlink" href="#changed" title="Permalink to this heading"></a></h4>
<ul>
<li><p class="linemarker linemarker-269"><strong>unix time de config:</strong> cada vez que el equipo se despierta por timer y
falla la inicialización del ds3231, el rtc interno se setea con el
valor del unix de la última vez que se configuró el equipo más una
cantidad de segundos que es igual al intervalo de medición
multiplicado por el número de veces que el equipo se despertó por
timer.</p>
<p class="linemarker linemarker-276">Por ejemplo, si el equipo está en modo 12 y se configuró a la 17:30,
entonces el tiempo unix de referencia se situa a la 17:00 y un
contador interno en 0. Entonces, si el equipo se despierta a la
19:00 y el ds3231 no se inicializó, el rtc se sitúa en <code class="docutils literal notranslate"><span class="pre">unix</span> <span class="pre">+</span>
<span class="pre">cont</span> <span class="pre">·</span> <span class="pre">Δ12</span></code>.</p>
<img alt="../_images/changelog-v6.2.0_02.png" src="../_images/changelog-v6.2.0_02.png" />
<p class="linemarker linemarker-284">Si el equipo está configurado en modo normal, entonces el tiempo unix
de referencia se situa a la 12:00. Si el equipo se despierta 24 hs
después, entonces el rtc se sitúa en</p>
<p class="linemarker linemarker-288">Así, suponiendo que la inicialización del ds3231 falló y el equipo
se configuró a la 17:30, el tiempo unix de referencia (si el modo
12 está activado) va a ser la 17:00; y si el equipo <code class="docutils literal notranslate"><span class="pre">unix</span> <span class="pre">+</span>
<span class="pre">cont</span> <span class="pre">·</span> <span class="pre">Δn</span></code>.</p>
<img alt="../_images/changelog-v6.2.0_01.png" src="../_images/changelog-v6.2.0_01.png" />
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p class="linemarker linemarker-297">Para que el equipo se setee bien, hay que seguir estos pasos:</p>
<ol class="arabic simple">
<li><p class="linemarker linemarker-299">Configurar el equipo normalmente.</p></li>
<li><p class="linemarker linemarker-300">Usar la palabra clave “modo12” 1 o 2 veces para des/activar el
modo 12.</p></li>
<li><p class="linemarker linemarker-302">Salir del menú “Configuración” y volver a entrar para que se
configure bien el tiempo unix de referencia.</p></li>
</ol>
</div>
</li>
</ul>
</section>
</section>
<section id="v6-0-2-12-09-2023">
<h3>V6.0.2 - 12/09/2023<a class="headerlink" href="#v6-0-2-12-09-2023" title="Permalink to this heading"></a></h3>
<section id="fixed">
<h4>Fixed<a class="headerlink" href="#fixed" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-311"><strong>Envío duplicado:</strong> cuando se enviaba por un json con un timestamp
futuro, se corregía pero el json corregido se enviaba 2 veces.</p></li>
</ul>
</section>
</section>
<section id="v6-0-1-10-09-2023">
<h3>V6.0.1 - 10/09/2023<a class="headerlink" href="#v6-0-1-10-09-2023" title="Permalink to this heading"></a></h3>
<section id="id1">
<h4>Fixed<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-320"><strong>Seteado de Rtc interno y externo:</strong> había problemas con el
seteado del rtc interno y del ds3231 a parti del tiempo unix.</p></li>
</ul>
</section>
</section>
<section id="v6-0-0-08-09-2023">
<h3>V6.0.0 - 08/09/2023<a class="headerlink" href="#v6-0-0-08-09-2023" title="Permalink to this heading"></a></h3>
<section id="id2">
<h4>Changed<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h4>
<ul>
<li><p class="linemarker linemarker-329"><strong>Medición de nivel promediado:</strong> la medición de un sensor de
nivel antes era:</p>
<ol class="arabic simple">
<li><p class="linemarker linemarker-332">Se alimenta sensor</p></li>
<li><p class="linemarker linemarker-333">Se espera 14 segundos</p></li>
<li><p class="linemarker linemarker-334">Se toma una medición</p></li>
<li><p class="linemarker linemarker-335">Se desalimenta el sensor</p></li>
<li><p class="linemarker linemarker-336">Se procesa la respuesta y se obtiene el valor del nivel medido</p></li>
</ol>
<p class="linemarker linemarker-338">Ahora se hace:</p>
<ol class="arabic simple">
<li><p class="linemarker linemarker-340">Se alimenta sensor</p></li>
<li><p class="linemarker linemarker-341">Se toma una medición</p></li>
<li><p class="linemarker linemarker-342">Se procesa la respuesta y se obtiene el valor del nivel medido</p></li>
<li><p class="linemarker linemarker-343">Se espera 1 segundo</p></li>
<li><p class="linemarker linemarker-344">Se repite los 30 veces 3 pasos anteriores (2 al 4)</p></li>
<li><p class="linemarker linemarker-345">Se desalimenta el sensor</p></li>
<li><p class="linemarker linemarker-346">Se promedia los 30 valores de nivel y no se tiene en cuenta
las mediciones en 0 ni las que se alejen demasiado del
promedio de las dos últimas mediciones.</p></li>
</ol>
</li>
</ul>
</section>
</section>
</section>
<section id="version-5">
<h2>Versión 5<a class="headerlink" href="#version-5" title="Permalink to this heading"></a></h2>
<section id="v5-3-0-08-09-2023">
<h3>V5.3.0 - 08/09/2023<a class="headerlink" href="#v5-3-0-08-09-2023" title="Permalink to this heading"></a></h3>
<section id="id3">
<h4>Changed<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h4>
<ul>
<li><p class="linemarker linemarker-359"><strong>Apn de Movistar:</strong> antes era:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">apn:    wap.gprs.unifon.com.ar</span>
<span class="go">user:   wap</span>
<span class="go">pwd:    wap</span>
</pre></div>
</div>
<p class="linemarker linemarker-367">y ahora es:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">apn:    gm2m.movistar</span>
<span class="go">user:   gm2m</span>
<span class="go">pwd:    gm2m</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="v5-2-2-07-09-2023">
<h3>V5.2.2 - 07/09/2023<a class="headerlink" href="#v5-2-2-07-09-2023" title="Permalink to this heading"></a></h3>
<section id="id4">
<h4>Fixed<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-381"><strong>Comunicación con la app:</strong> se arreglaron algunos fallas con la
comunicación con la app.</p></li>
</ul>
</section>
<section id="added">
<h4>Added<a class="headerlink" href="#added" title="Permalink to this heading"></a></h4>
<ul>
<li><p class="linemarker linemarker-387"><strong>Palabra clave “reset”:</strong> resetea el esp32, al igual que apretar
el botón EN en la placa de desaroollo. Esto se hace debido a que
a veces el equipo muestra comportamientos no esperados.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p class="linemarker linemarker-393">Al hacer esto, la red wifi se apaga y se la tiene que volver a
generar con el pulsador magnético.</p>
</div>
</li>
</ul>
</section>
</section>
<section id="v5-2-1-30-08-2023">
<h3>V5.2.1 - 30/08/2023<a class="headerlink" href="#v5-2-1-30-08-2023" title="Permalink to this heading"></a></h3>
<section id="id5">
<h4>Changed<a class="headerlink" href="#id5" title="Permalink to this heading"></a></h4>
<ul>
<li><p class="linemarker linemarker-403"><strong>Palabra clave “chequeo”:</strong> se agrega información de los
modos 12 y offline y del número de mediciones guardadas.</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

Chequeo:
========
- Tarjeta SD: ok
- Reloj externo: ok
- Salidas:
 · 1) ok
 · 2) No configurado
 · 3) No configurado
 · 4) No configurado
<span class="hll">- Modo 12: No
</span><span class="hll">- Modo offline: Sí
</span><span class="hll">- Mediciones guardadas: 3
</span></pre></div>
</div>
<p class="linemarker linemarker-425">En donde las últimas líneas resaltadas son las agregadas.</p>
</li>
</ul>
</section>
</section>
<section id="v5-2-1-29-08-2023">
<h3>V5.2.1 - 29/08/2023<a class="headerlink" href="#v5-2-1-29-08-2023" title="Permalink to this heading"></a></h3>
<section id="id6">
<h4>Changed<a class="headerlink" href="#id6" title="Permalink to this heading"></a></h4>
<ul>
<li><p class="linemarker linemarker-433"><strong>Respuesta de configuración ok:</strong> cuando la configuración
se hace bien, se guarda y se envía, se responde a la app el
siguiente http_response:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>HTTP/1.1<span class="w"> </span><span class="m">200</span><span class="w"> </span>OK
Content-Type:text/plain<span class="p">;</span><span class="nv">charset</span><span class="o">=</span>UTF-8

Equipo<span class="w"> </span><span class="nv">configurado</span>
<span class="o">==================</span>
<span class="m">1</span>:<span class="w"> </span><span class="m">10</span>.00<span class="w"> </span>metros<span class="w"> </span><span class="o">(</span>the<span class="o">)</span>
<span class="m">2</span>:<span class="w"> </span>No<span class="w"> </span>configurado
<span class="m">3</span>:<span class="w"> </span>No<span class="w"> </span>configurado
<span class="m">4</span>:<span class="w"> </span>No<span class="w"> </span>configurado
</pre></div>
</div>
</li>
<li><p class="linemarker linemarker-449"><strong>Respuesta de configuración con json mal formado:</strong> cuando
la app manda un json mal formado, la http response es:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>HTTP/1.1<span class="w"> </span><span class="m">200</span><span class="w"> </span>OK
Content-Type:text/plain<span class="p">;</span><span class="nv">charset</span><span class="o">=</span>UTF-8

Json<span class="w"> </span>inválido
</pre></div>
</div>
</li>
<li><p class="linemarker linemarker-459"><strong>Respuesta de configuración con modo offline:</strong> si el
equipo está con el modo offline activo y la app envía una
petición para hacer una configuración, ésta se hace pero no
se envía; la http response es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

Modo offline activo. Configuración hecha, pero no enviada
Equipo configurado
==================
1: 10.00 metros (the)
2: No configurado
3: No configurado
4: No configurado
</pre></div>
</div>
</li>
<li><p class="linemarker linemarker-477"><strong>Respuesta de configuración con problemas de conexión:</strong> si
el equipo recibe una petición para configurarlo y hay
problemas de conexión, el chip está mal colocado o no tiene
datos activados, la configuración se hace pero no se envía.
La http response es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

Problemas de conexión. Chip mal colocado o sin datos.
Configuración hecha, pero no enviada
Equipo configurado
==================
1: 10.00 metros (the)
2: No configurado
3: No configurado
4: No configurado
</pre></div>
</div>
</li>
<li><p class="linemarker linemarker-497"><strong>Respuesta de configuración con problemas del servidor:</strong> si
el equipo recibe una petición para configurarlo y se logra
conectar a internet pero no al servidor, la configuración se
hace pero no se envía. La http response es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

Problemas de servidor. Configuración hecha, pero no enviada
Equipo configurado
==================
1: 10.00 metros (the)
2: No configurado
3: No configurado
4: No configurado
</pre></div>
</div>
</li>
<li><p class="linemarker linemarker-515"><strong>Respuesta a palabra clave “modo12”:</strong> al usar la palabra
clave “modo 12”, se des/activa el modo 12, y el http response
depende de si el modo 12 está activado o no.
Si está activado, es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

Modo 12:
 · Medición cada 1 hs
 · Envío cada 12 hs
 · Envíos a la 00:00 y 12:00 hs
</pre></div>
</div>
<p class="linemarker linemarker-530">Si está desactivado, es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

Modo normal:
 · Medición cada 24 hs
 · Envío cada 24 hs
 · Envíos a la 12:00 hs
</pre></div>
</div>
</li>
<li><p class="linemarker linemarker-542"><strong>Respuesta a palabra clave “offline”:</strong> al usar la palabra
clave “offline”, se des/activa el modo offline, y el http
response depende de si el modo offline está activado o no.
Si está activado, es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

Modo offline: las mediciones NO se envían, sólo se guardan
</pre></div>
</div>
<p class="linemarker linemarker-554">Si está desactivado, es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

Modo online: las mediciones se envían normalmente
</pre></div>
</div>
</li>
<li><p class="linemarker linemarker-563"><strong>Respuesta a configuración con problemas de sensor:</strong> si el
equipo recibe una petición de configuración, pero hay
problemas con un sensor en una salida, no se toca la
configuración anterior y el http response es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

Problemas con la salida 1. Revise conexión
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p class="linemarker linemarker-577">Cuando se detecta problemas en una salida, se interrumpe
la configuración y no se sigue con la siguiente. Por
ejemplo, si se quiere configurar sensores en las salidas
1 y 2 y ambos están descoenctados, entonces se muestra el
mensaje anterior, pero no hay forma de saber el estado
de la salida 2. Por eso hay que corregir el el problema
en la salida 1 e intentar configurar de nuevo para saber
si el sensor en la salida 2 responde bien.</p>
</div>
</li>
<li><p class="linemarker linemarker-586"><strong>Respuesta a palabra clave “erase”:</strong> se borra la
la configuración y http response es:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

La configuración ha sido borrada
</pre></div>
</div>
</li>
<li><p class="linemarker linemarker-596"><strong>Respuesta a palabra clave “eeprom”:</strong> devuelve el json de
configuración que se arma para enviar al servidor.</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

{
  &quot;id&quot;: &quot;L-7BF4&quot;,
  &quot;product&quot;: &quot;THSST&quot;,
  &quot;soil_type&quot;: &quot;Arcilloso&quot;,
  &quot;location_name&quot;: &quot;holas&quot;,
  &quot;location&quot;: {
      &quot;latitude&quot;: -31.44030952,
      &quot;longitude&quot;: -64.20405579
  },
  &quot;sensors&quot;: {
      &quot;00000000001&quot;: {
      &quot;type&quot;: &quot;the&quot;,
      &quot;tag_depth&quot;: &quot;10.00&quot;
      }
  }
}
</pre></div>
</div>
</li>
<li><p class="linemarker linemarker-621"><strong>Respuesta a palabra clave “chequeo”:</strong> chequea el estado del
equipo y devuelve el resultado:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

Chequeo:
========
- Tarjeta SD: ok
- Reloj externo: ok
- Salidas:
  · 1) ok
  · 2) No configurado
  · 3) No configurado
  · 4) No configurado
</pre></div>
</div>
</li>
<li><p class="linemarker linemarker-639"><strong>Respuesta a palabra clave “regall”:</strong> devuelve el archivo
“regall.txt”:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

[
  {json_measure_0}
  ,{json_measure_1}
  ,{json_measure_2}
  ,...
  ,{json_measure_n}
]
</pre></div>
</div>
</li>
<li><p class="linemarker linemarker-655"><strong>Respuesta a palabra clave “voltaje,”:</strong> setea el coeficiente
de voltaje y devuelve:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>

Coeficiente de voltaje seteado en 1.02
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="v5-2-0-28-08-2023">
<h3>V5.2.0 - 28/08/2023<a class="headerlink" href="#v5-2-0-28-08-2023" title="Permalink to this heading"></a></h3>
<section id="id7">
<h4>Added<a class="headerlink" href="#id7" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-671"><strong>Funcionalidad para guardar registro:</strong> se guarda registro
en la memoria SD para las peticiones updateDate y setConfig.</p></li>
</ul>
</section>
</section>
<section id="v5-1-0-24-08-2023">
<h3>V5.1.0 - 24/08/2023<a class="headerlink" href="#v5-1-0-24-08-2023" title="Permalink to this heading"></a></h3>
<section id="id8">
<h4>Added<a class="headerlink" href="#id8" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-680"><strong>Respuesta a la palabra clave “modulo”:</strong> se elimina y se
recrea el archivo “register.txt”, que es en donde se guardan
las mediciones no enviadas. La HTTP response es:</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="n">OK</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="n">text</span><span class="o">/</span><span class="n">plain</span><span class="p">;</span><span class="n">charset</span><span class="o">=</span><span class="n">UTF</span><span class="mi">-8</span>

<span class="n">Memoria</span><span class="w"> </span><span class="n">SD</span><span class="w"> </span><span class="n">formateada</span>
</pre></div>
</div>
<ul class="simple">
<li><p class="linemarker linemarker-691"><strong>Respuesta a configuración en offline:</strong> cuando el equipo está
en modo offline y la app manda la petición para configurarlo,
la configuración se hace pero no se envía el metadata al
servidor. La HTTP response es:</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="n">OK</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="n">text</span><span class="o">/</span><span class="n">plain</span><span class="p">;</span><span class="n">charset</span><span class="o">=</span><span class="n">UTF</span><span class="mi">-8</span>

<span class="n">Configuración</span><span class="w"> </span><span class="n">hecha</span><span class="w"> </span><span class="n">pero</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">enviada</span><span class="p">,</span><span class="w"> </span><span class="n">el</span><span class="w"> </span><span class="n">equipo</span><span class="w"> </span><span class="n">está</span>
<span class="n">en</span><span class="w"> </span><span class="n">modo</span><span class="w"> </span><span class="n">offline</span>
</pre></div>
</div>
</section>
</section>
<section id="v5-0-1-30-06-2023">
<h3>V5.0.1 - 30/06/2023<a class="headerlink" href="#v5-0-1-30-06-2023" title="Permalink to this heading"></a></h3>
<section id="id9">
<h4>Fixed<a class="headerlink" href="#id9" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-710"><strong>Respuesta al modo12</strong>: se cambia el mensaje cuando el modo12 está
activado. Pasa de ser:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&quot;Modo Ledesma: se mide cada 1...&quot;</span>
</pre></div>
</div>
<p class="linemarker linemarker-717">a ser:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&quot;Modo 12: se mide cada 1...&quot;</span>
</pre></div>
</div>
<section id="id10">
<h5>Added<a class="headerlink" href="#id10" title="Permalink to this heading"></a></h5>
<ul class="simple">
<li><p class="linemarker linemarker-726">Se muestra tipo de sensor en respuesta a “eeprom”: cuando se
responde a la palabra clave “eeprom”, ahora se muestra el
tipo de sensor, y si es de tipo “nivel”, se muestran metros
en lugar de cm. La respuesta pasa de ser:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">O2) 12.00 cm</span>
<span class="go">O3) 2.00 cm</span>
</pre></div>
</div>
<p class="linemarker linemarker-736">a ser:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">O2) 14.00 cm (the)</span>
<span class="go">O3) 2.00 m (nivel)</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="v5-0-0-29-06-2023">
<h3>V5.0.0 - 29/06/2023<a class="headerlink" href="#v5-0-0-29-06-2023" title="Permalink to this heading"></a></h3>
<section id="id11">
<h4>Changed<a class="headerlink" href="#id11" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-750"><strong>Json que la app manda al equipo</strong>: se cambia el json que la app le
manda al equipo para configurarlo. En particular, se eliminan los
espacios en el nombre del siguiente campo:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&quot;Salida 1 (o1)&quot;: 100,</span>
</pre></div>
</div>
<p class="linemarker linemarker-758">ahora es:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&quot;Salida1(o1)&quot;: 100,</span>
</pre></div>
</div>
<p class="linemarker linemarker-764">El json entonces pasa de ser:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;soil_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Arcilloso&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;location_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Hola&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;sensors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;Salida 2 (o2)&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;nivel&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;tag_depth&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-31.4403103</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-64.2040562</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="linemarker linemarker-783">a ser:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;soil_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Arcilloso&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;location_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Hola&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;sensors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;Salida2(o2)&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;nivel&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;tag_depth&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-31.4403103</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-64.2040562</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="linemarker linemarker-802">El siguiente gráfico muestra resaltado el campo modificado.</p>
<img alt="../_images/changelog-01.png" src="../_images/changelog-01.png" />
<img alt="../_images/changelog-02.png" src="../_images/changelog-02.png" />
</section>
<section id="id12">
<h4>Added<a class="headerlink" href="#id12" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-810"><strong>Documentación “modo12” y “modooffline”</strong>: faltaba documentar lo que
significaban estos modos.</p></li>
</ul>
<table class="docutils align-default" id="id36">
<caption><span class="caption-text">Modos 12 y offline</span><a class="headerlink" href="#id36" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p class="linemarker linemarker-1">Modo</p></th>
<th class="head"><p class="linemarker linemarker-1">Intervalo de medición (hs)</p></th>
<th class="head"><p class="linemarker linemarker-1">Intervalo de envío (hs)</p></th>
<th class="head"><p class="linemarker linemarker-1">Hora de envío</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p class="linemarker linemarker-1">12</p></td>
<td><p class="linemarker linemarker-1">1</p></td>
<td><p class="linemarker linemarker-1">12</p></td>
<td><p class="linemarker linemarker-1">0:00 y 12:00</p></td>
</tr>
<tr class="row-odd"><td><p class="linemarker linemarker-1">Normal</p></td>
<td><p class="linemarker linemarker-1">24</p></td>
<td><p class="linemarker linemarker-1">24</p></td>
<td><p class="linemarker linemarker-1">12:00</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p class="linemarker linemarker-821">Cuando el modo offline está activo, el equipo no enciende el módulo SIM808 para enviar datos, así que solamente los guarda en la memoria SD.</p>
</div>
</section>
</section>
</section>
<section id="version-4">
<h2>Versión 4<a class="headerlink" href="#version-4" title="Permalink to this heading"></a></h2>
<section id="v4-2-2-27-06-2023">
<h3>V4.2.2 - 27/06/2023<a class="headerlink" href="#v4-2-2-27-06-2023" title="Permalink to this heading"></a></h3>
<section id="id13">
<h4>Fixed<a class="headerlink" href="#id13" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-830"><strong>Modo12 y modooffline</strong>: había un problema en la declaración de una variable que no permitía que las variables booleanas relacionadas a esos modos se guardaran de forma correcta. Corregido.</p></li>
</ul>
</section>
</section>
<section id="v4-2-1-27-06-2023">
<h3>V4.2.1 - 27/06/2023<a class="headerlink" href="#v4-2-1-27-06-2023" title="Permalink to this heading"></a></h3>
<section id="id14">
<h4>Fixed<a class="headerlink" href="#id14" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-836"><strong>Modo ledesma</strong>: había errores en el enviado de las mediciones.</p></li>
</ul>
</section>
</section>
<section id="v4-2-0-27-06-2023">
<h3>V4.2.0 - 27/06/2023<a class="headerlink" href="#v4-2-0-27-06-2023" title="Permalink to this heading"></a></h3>
<section id="id15">
<h4>Added<a class="headerlink" href="#id15" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-842"><strong>Modo offline</strong>: se agrega la palabra clave “offline”, para decirle al equipo que no hay cobertura así no enciende el módulo sim después de realizar la medición.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<dl class="simple">
<dt>Cada vez que se agrega un campo a la estructura de la eeprom, se deben seguir los siguientes pasos:</dt><dd><ul class="simple">
<li><p class="linemarker linemarker-846">Agregar escritura en la función Eeprom1::setStruct</p></li>
<li><p class="linemarker linemarker-847">Agregar escritura en la función Eeprom1::erase_nvs</p></li>
<li><p class="linemarker linemarker-848">Agregar lectura en la función Eeprom1::getStruct</p></li>
<li><p class="linemarker linemarker-849">Descomentar la función Eeprom1::erase_nvs después de inicializar el espacio nvs en la función Eeprom1::setup()</p></li>
<li><p class="linemarker linemarker-850">Comentar la función Eeprom1::erase_nvs después de inicializar el espacio nvs en la función Eeprom1::setup()</p></li>
</ul>
</dd>
</dl>
</div>
</section>
</section>
<section id="v4-1-6-23-06-2023">
<h3>V4.1.6 - 23/06/2023<a class="headerlink" href="#v4-1-6-23-06-2023" title="Permalink to this heading"></a></h3>
<section id="id16">
<h4>Fixed<a class="headerlink" href="#id16" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-856"><strong>Modo12 corregido</strong>: cuando la app mandaba la palabra clave “modo12”,
no se guardaba bien el valor booleano en la eeprom. Corregido.</p></li>
</ul>
</section>
</section>
<section id="v4-1-5-23-06-2023">
<h3>V4.1.5 - 23/06/2023<a class="headerlink" href="#v4-1-5-23-06-2023" title="Permalink to this heading"></a></h3>
<section id="id17">
<h4>Added<a class="headerlink" href="#id17" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-863">Se responde firm vers a la app: cuando se abre la app, además de poner
en hora al rtc externo, el equipo le responde con la versión de
firmware. Antes se respondía:</p></li>
</ul>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span><span class="l">text/plain;charset=UTF-8</span>
</pre></div>
</div>
<p class="linemarker linemarker-872">y ahora se responde:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">HTTP/1.1 200 OK</span>
<span class="go">Content-Type:text/plain;charset=UTF-8</span>

<span class="go">V4.1.5</span>
</pre></div>
</div>
</section>
</section>
<section id="v4-1-4-23-06-2023">
<h3>V4.1.4 - 23/06/2023<a class="headerlink" href="#v4-1-4-23-06-2023" title="Permalink to this heading"></a></h3>
<section id="id18">
<h4>Changed<a class="headerlink" href="#id18" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-886">Cambio de palabra clave: se cambió la palabra clave “ledesma12” por
“modo12”, para que no exista ninguna referencia al nombre de ninguna
empresa.</p></li>
</ul>
</section>
</section>
<section id="v4-1-3-23-06-2023">
<h3>V4.1.3 - 23/06/2023<a class="headerlink" href="#v4-1-3-23-06-2023" title="Permalink to this heading"></a></h3>
<section id="id19">
<h4>Fixed<a class="headerlink" href="#id19" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-895"><strong>Apagado de sensor si no se puede chequear</strong>: cuando se configura
un sensor y éste no responde después de un determinado intento, la
salida no se deshabilitaba y el sensor quedaba alimentado. Corregido.</p></li>
</ul>
</section>
</section>
<section id="v4-1-2-22-06-2023">
<h3>V4.1.2 - 22/06/2023<a class="headerlink" href="#v4-1-2-22-06-2023" title="Permalink to this heading"></a></h3>
<section id="id20">
<h4>Fixed<a class="headerlink" href="#id20" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-903"><strong>Guardado de modo ledesma</strong>: había problemas cuando se mandaba la
palabra clave “ledesma12”, no se guardaba correctamente. Corregido.</p></li>
</ul>
</section>
</section>
<section id="v4-1-1-22-06-2023">
<h3>V4.1.1 - 22/06/2023<a class="headerlink" href="#v4-1-1-22-06-2023" title="Permalink to this heading"></a></h3>
<section id="id21">
<h4>Fixed<a class="headerlink" href="#id21" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-911"><strong>No sube mediciones manuales</strong>: cuando se pedía una medición manual
ya sea por app o por monitor, la medición no se subía. Corregido.</p></li>
</ul>
</section>
</section>
<section id="v4-1-0-21-06-2023">
<h3>V4.1.0 - 21/06/2023<a class="headerlink" href="#v4-1-0-21-06-2023" title="Permalink to this heading"></a></h3>
<section id="id22">
<h4>Added<a class="headerlink" href="#id22" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-918"><strong>Palabra clave “ledesma12”</strong>: se habilita al equipo a realizar una
medición cada 1 hora y subir lo guardado cada 12 horas.</p></li>
</ul>
</section>
</section>
<section id="v4-0-2-21-06-2023">
<h3>V4.0.2 - 21/06/2023<a class="headerlink" href="#v4-0-2-21-06-2023" title="Permalink to this heading"></a></h3>
<section id="id23">
<h4>Fixed<a class="headerlink" href="#id23" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-925"><strong>No hace medición de sensor de nivel</strong>: no se hacía la medición si el
sensor estaba configurado como de nivel. Se trataba de un error en el
firmware, filtraba por <code class="docutils literal notranslate"><span class="pre">level</span></code> en lugar de hacerlo por <code class="docutils literal notranslate"><span class="pre">nivel</span></code>. Corregido.</p></li>
</ul>
</section>
<section id="id24">
<h4>Added<a class="headerlink" href="#id24" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-931"><strong>Mostrado de register como array</strong>: ante la orden por monitor “register”,
el archivo “register.txt” se muestra como un array de json.</p></li>
</ul>
</section>
</section>
<section id="v4-0-1-21-06-2023">
<h3>V4.0.1 - 21/06/2023<a class="headerlink" href="#v4-0-1-21-06-2023" title="Permalink to this heading"></a></h3>
<section id="id25">
<h4>Fixed<a class="headerlink" href="#id25" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-938"><strong>No se configura si no se especifica sensor</strong>: si no se agrega ningún
sensor en la configuración, se devuelve un mensaje y no se configura el
equipo, ni tampoco se sube nada al servidor.</p></li>
<li><p class="linemarker linemarker-941"><strong>Se pone “” en el tipo de sensor no configurado</strong>: si no se especifica
la salida de un sensor (tipo y profundidad), entonces se guarda “” en
la eeprom en la salida correspondiente.</p></li>
</ul>
</section>
</section>
<section id="v4-0-0-21-06-2023">
<h3>V4.0.0 - 21/06/2023<a class="headerlink" href="#v4-0-0-21-06-2023" title="Permalink to this heading"></a></h3>
<section id="id26">
<h4>Added<a class="headerlink" href="#id26" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-949"><strong>La memoria eeprom se maneja de otra forma</strong>: se deja de usar la
librería <code class="docutils literal notranslate"><span class="pre">EEPROM.h</span></code> y se la reemplaza por la librería <code class="docutils literal notranslate"><span class="pre">Preferences.h</span></code>.
Esta librería maneja mejor el espacio y prolonga la vida útil del
almacenamiento no volátil.</p></li>
<li><p class="linemarker linemarker-953"><strong>Se chequea antes de escribir en la eeprom</strong>: se chequea cada campo
que se va a escribir en la eeprom para evitar sobreescribir un campo si
en la eeprom hay un valor igual.</p></li>
</ul>
</section>
</section>
</section>
<section id="version-3">
<h2>Versión 3<a class="headerlink" href="#version-3" title="Permalink to this heading"></a></h2>
<section id="v3-1-4-16-06-2023">
<h3>V3.1.4 - 16/06/2023<a class="headerlink" href="#v3-1-4-16-06-2023" title="Permalink to this heading"></a></h3>
<section id="id27">
<h4>Fixed<a class="headerlink" href="#id27" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-964"><strong>Palabra clave “voltaje,”</strong>: cuando la app recibe como location_name
<code class="docutils literal notranslate"><span class="pre">voltaje,12.05</span></code>, se configura el coefficiente de voltaje con este valor.</p></li>
</ul>
</section>
</section>
<section id="v3-1-3-16-06-2023">
<h3>V3.1.3 - 16/06/2023<a class="headerlink" href="#v3-1-3-16-06-2023" title="Permalink to this heading"></a></h3>
<section id="id28">
<h4>Fixed<a class="headerlink" href="#id28" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-971"><strong>Respuesta al json mal formado</strong>: cuando la app manda un json metadata
mal formado, el equipo le responde con el mensaje de “metadata mal formado”.</p></li>
</ul>
</section>
</section>
<section id="v3-1-2-16-06-2023">
<h3>V3.1.2 - 16/06/2023<a class="headerlink" href="#v3-1-2-16-06-2023" title="Permalink to this heading"></a></h3>
<section id="id29">
<h4>Fixed<a class="headerlink" href="#id29" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-978"><strong>Tiempo a dormir corregido</strong>: los segundos en que se ponia a dormir el
equipo estaban calculados para las 12 de la noche y no del mediodía.</p></li>
</ul>
</section>
</section>
<section id="v3-1-1-14-06-2023">
<h3>V3.1.1 - 14/06/2023<a class="headerlink" href="#v3-1-1-14-06-2023" title="Permalink to this heading"></a></h3>
<section id="id30">
<h4>Added<a class="headerlink" href="#id30" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-985"><strong>Ver tiempo a dormir</strong>: con la orden por monitor <code class="docutils literal notranslate"><span class="pre">sleep</span></code> se muestra
el tiempo (segundos y en horas, minutos y segundos) que quedan para que
se cumpla las 12am del siguiente día.</p></li>
</ul>
</section>
</section>
<section id="v3-1-0-13-06-2023">
<h3>V3.1.0 - 13/06/2023<a class="headerlink" href="#v3-1-0-13-06-2023" title="Permalink to this heading"></a></h3>
<section id="id31">
<h4>Added<a class="headerlink" href="#id31" title="Permalink to this heading"></a></h4>
<ul>
<li><p class="linemarker linemarker-993"><strong>Palabras clave</strong>: son palabras clave introducidas en la configuración
en el campo <code class="docutils literal notranslate"><span class="pre">location_name</span></code> para que el equipo realice determinadas
tareas. Las palabras clave son todas en minúscula y la lista es la
siguiente:
- <strong>erase</strong>: borra los siguientes campos en la memoria eeprom:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">BORRADO --&gt; String location_name;</span>
<span class="go">BORRADO --&gt; String soil_type;</span>
<span class="go">BORRADO --&gt; float latitude;</span>
<span class="go">BORRADO --&gt; float longitude;</span>
<span class="go">BORRADO --&gt; String type[4];</span>
<span class="go">BORRADO --&gt; float tag_depth[4];</span>
<span class="go">            String mac;</span>
<span class="go">BORRADO --&gt; bool pending_config;</span>
<span class="go">            String firmware_version;</span>
<span class="go">            float voltage_coefficient;</span>
<span class="go">            uint32_t unix_time;</span>
<span class="go">            uint32_t wakeup_number;</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li><p class="linemarker linemarker-1014"><strong>eeprom</strong>: muestra en el HTTP request lo que hay en la eeprom.</p></li>
<li><p class="linemarker linemarker-1015"><strong>*bat</strong>: muestra en el HTTP request el archivo <code class="docutils literal notranslate"><span class="pre">bat.txt</span></code>, que es
el registro de actividades del equipo.</p></li>
<li><p class="linemarker linemarker-1017"><strong>chequeo</strong>: reinstala todos los módulos y da un reporte.</p></li>
<li><p class="linemarker linemarker-1018"><strong>*regall</strong>: muestra en el HTTP request el archivo <code class="docutils literal notranslate"><span class="pre">regall.txt</span></code>,
que es el registro de todas las mediciones que hizo el equipo, se
hayan mandado o no.</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p class="linemarker linemarker-1024">Los archivos <code class="docutils literal notranslate"><span class="pre">bat.txt</span></code> y <code class="docutils literal notranslate"><span class="pre">regall.txt</span></code> son demasiado grandes como
para que puedan ser vistos en la ventana emergente que muestra la app,
así que hay que usar el Packet Sender o programa similar.</p>
</div>
</section>
</section>
<section id="v3-0-0-13-06-2023">
<h3>V3.0.0 - 13/06/2023<a class="headerlink" href="#v3-0-0-13-06-2023" title="Permalink to this heading"></a></h3>
<section id="id32">
<h4>Added<a class="headerlink" href="#id32" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-1032"><strong>Medición a las 12:00 del mediodía</strong>: el equipo se despierta y
realiza la medición automática si es la 12:00 del mediodía; si no es
así, se pone a dormir sin hacer nada el tiempo que falte para llegar
a la 12:00. Esto se debe hacer porque por más que se ponga al esp32
a dormir 86400 segundos (número de segundos que tiene 1 día), siempre
se despierta antes, por eso la necesidad de un rtc externo como
el ds3231.</p></li>
</ul>
</section>
</section>
</section>
<section id="version-2">
<h2>Versión 2<a class="headerlink" href="#version-2" title="Permalink to this heading"></a></h2>
<section id="v2-0-2-13-06-2023">
<h3>V2.0.2 - 13/06/2023<a class="headerlink" href="#v2-0-2-13-06-2023" title="Permalink to this heading"></a></h3>
<section id="removed">
<h4>Removed<a class="headerlink" href="#removed" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-1047"><strong>Actualiza rtc interno cuando el servidor responde 200 OK</strong>: cuando
la hora está bien, el servidor responde lo siguiente:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">{&quot;message&quot;:&quot;Se actualizaron los datos de L-7BF4&quot;,&quot;timestamp&quot;:&quot;2023-06-13T14:03:44&quot;}</span>
</pre></div>
</div>
<p class="linemarker linemarker-1054">y cuando la hora está mal responde:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">{&quot;message&quot;:&quot;Error fecha fuera de rango.&quot;,&quot;timestamp&quot;:&quot;13/06/2023, 11:05:07&quot;}</span>
</pre></div>
</div>
<p class="linemarker linemarker-1060">El rtc interno ahora sólo se actualiza en el segundo caso debido a que
como responde en formatos diferentes, generaba error en el 1er caso.</p>
</section>
</section>
<section id="v2-0-1-12-06-2023">
<h3>V2.0.1 - 12/06/2023<a class="headerlink" href="#v2-0-1-12-06-2023" title="Permalink to this heading"></a></h3>
<section id="id33">
<h4>Changed<a class="headerlink" href="#id33" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-1067"><strong>Respuesta a la configuración</strong>: se modifica el texto que se responde
a la app cuando se configura el equipo para que se agregue información
sobre el tipo de sensor. Pasa de ser:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Equipo configurado:</span>
<span class="go">===================</span>
<span class="go">1) 10 cm</span>
<span class="go">2) 20 cm</span>
<span class="go">3) No configurado</span>
<span class="go">4) No configurado</span>
</pre></div>
</div>
<p class="linemarker linemarker-1080">a ser:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Equipo configurado:</span>
<span class="go">===================</span>
<span class="go">1) 10 cm (htc)</span>
<span class="go">2) 20 cm (npk)</span>
<span class="go">3) 5 m (nivel)</span>
<span class="go">4) No configurado</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p class="linemarker linemarker-1092">En el caso del sensor de nivel, la profundidad pasa a ser la distancia
desde la punta del sensor hasta el fondo del canal (en metros).</p>
</div>
</section>
</section>
<section id="v2-0-0-12-06-2023">
<h3>V2.0.0 - 12/06/2023<a class="headerlink" href="#v2-0-0-12-06-2023" title="Permalink to this heading"></a></h3>
<section id="id34">
<h4>Added<a class="headerlink" href="#id34" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-1099"><strong>Sensor de nivel y npk</strong>: se agrega funcionalidad para que las entradas
manejen sensores de 3 tipos: the, npk y de nivel. Se necesitó hacer
cambios en el json que se recibe de la app y el metadata.
El json que la app manda a la central era:</p></li>
</ul>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;soil_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Loamy Sand&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;location_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;río bravo&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;sensors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;Salida1(o1)&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;Salida2(o2)&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;Salida3(o3)&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;Salida4(o4)&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-31.4403103</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-64.2040562</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="linemarker linemarker-1121">y ahora pasa a ser:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;soil_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Loamy Sand&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;location_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;río bravo&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;sensors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;Salida 1 (o1)&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;tag_depth&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;Salida 2 (o2)&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;npk&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;tag_depth&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;Salida 3 (o3)&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;nivel&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;tag_depth&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-31.4403103</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-64.2040562</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="linemarker linemarker-1148">El json de metadata era:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;L-7BF4&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;product&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;THSST&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;soil_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Clay&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;location_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Granja del sol&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-29.4570732</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-66.8782501</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;sensors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;00000000001&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10.00&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;00000000002&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;20.00&quot;</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="linemarker linemarker-1167">y ahora pasa a ser:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;L-7BF4&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;product&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;THSST&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;soil_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Clay&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;location_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Granja del sol&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-29.4570732</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-66.8782501</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;sensors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;000000001&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;tag_depth&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;000000002&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;npk&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;tag_depth&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;000000003&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;nivel&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;tag_depth&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="linemarker linemarker-1196">El json de medición queda como estaba:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;L-1234&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;product&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;THSST&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-12-23-21-58-08&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;latitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-31.44021797</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;longitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-64.20396423</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;sn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0620019&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;humidity&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.000</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;temperature&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">31.70</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;location_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hola&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;tag_depth&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;loss_tangent&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.114</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;electrical_conductivity&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">89.10</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;electrical_conductivity_tc&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.001</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;real_dielectric_permittivity&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.35</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;real_dielectric_permittivity_tc&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.36</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;imag_dielectric_permittivity&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.389</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;imag_dielectric_permittivity_tc&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.353</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;level_bat&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">12.00</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;verFirm&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;V1.0.0&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;verHard&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;V1.0.0&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="linemarker linemarker-1228">Si el sensor es the, los parámetros no nulos son:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">NO NULO --&gt; H: &quot;humidity&quot;: 0.000,</span>
<span class="go">NO NULO --&gt; T: &quot;temperature&quot;: 31.70,</span>
<span class="go">               &quot;location_name&quot;: &quot;hola&quot;,</span>
<span class="go">               &quot;tag_depth&quot;: 100,</span>
<span class="go">               &quot;loss_tangent&quot;: 1.114,</span>
<span class="go">NO NULO --&gt; E: &quot;electrical_conductivity&quot;: 0.000,</span>
<span class="go">               &quot;electrical_conductivity_tc&quot;: 0.00,</span>
<span class="go">               &quot;real_dielectric_permittivity&quot;: 0.00,</span>
<span class="go">               &quot;real_dielectric_permittivity_tc&quot;: 0.00,</span>
<span class="go">               &quot;imag_dielectric_permittivity&quot;: 0.00,</span>
<span class="go">               &quot;imag_dielectric_permittivity_tc&quot;: 0.00,</span>
</pre></div>
</div>
<p class="linemarker linemarker-1244">Si el sensor es npk, los parámetros no nulos son:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">NO NULO --&gt; H: &quot;humidity&quot;: 0.000,</span>
<span class="go">NO NULO --&gt; T: &quot;temperature&quot;: 31.70,</span>
<span class="go">               &quot;location_name&quot;: &quot;hola&quot;,</span>
<span class="go">               &quot;tag_depth&quot;: 100,</span>
<span class="go">               &quot;loss_tangent&quot;: 0.00,</span>
<span class="go">NO NULO --&gt; E: &quot;electrical_conductivity&quot;: 10.00,</span>
<span class="go">NO NULO --&gt; N: &quot;electrical_conductivity_tc&quot;: 20.00,</span>
<span class="go">NO NULO --&gt; P: &quot;real_dielectric_permittivity&quot;: 30.00,</span>
<span class="go">NO NULO --&gt; K: &quot;real_dielectric_permittivity_tc&quot;: 0.00,</span>
<span class="go">               &quot;imag_dielectric_permittivity&quot;: 0.00,</span>
<span class="go">               &quot;imag_dielectric_permittivity_tc&quot;: 0.00,</span>
</pre></div>
</div>
<p class="linemarker linemarker-1260">Si el sensor es level, los parámetros no nulos son:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">               &quot;humidity&quot;: 0.000,</span>
<span class="go">               &quot;temperature&quot;: 0.00,</span>
<span class="go">               &quot;location_name&quot;: &quot;hola&quot;,</span>
<span class="go">               &quot;tag_depth&quot;: 100,</span>
<span class="go">NO NULO --&gt; L: &quot;loss_tangent&quot;: 5.00,</span>
<span class="go">               &quot;electrical_conductivity&quot;: 0.00,</span>
<span class="go">               &quot;electrical_conductivity_tc&quot;: 0.00,</span>
<span class="go">               &quot;real_dielectric_permittivity&quot;: 0.00,</span>
<span class="go">               &quot;real_dielectric_permittivity_tc&quot;: 0.00,</span>
<span class="go">               &quot;imag_dielectric_permittivity&quot;: 0.00,</span>
<span class="go">               &quot;imag_dielectric_permittivity_tc&quot;: 0.00,</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="version-1">
<h2>Versión 1<a class="headerlink" href="#version-1" title="Permalink to this heading"></a></h2>
<section id="v1-0-0-12-06-2023">
<h3>V1.0.0 - 12/06/2023<a class="headerlink" href="#v1-0-0-12-06-2023" title="Permalink to this heading"></a></h3>
<section id="id35">
<h4>Added<a class="headerlink" href="#id35" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p class="linemarker linemarker-1283"><strong>Rtc interno</strong>: la hora y fecha se carga en el rtc interno del esp32
cuando se despierta desde el de3231; si no se carga el ds3231, se carga
con el tiempo unix guardado en la eeprom y se hace un aproximado.</p></li>
</ul>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="bugs.html" class="btn btn-neutral float-left" title="10.- Bugs reportados" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, BristeFirmware.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>